<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code Generator Pro</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="logo-section">
                    <i class="fas fa-qrcode"></i>
                    <h1>QR Generator Pro</h1>
                </div>
                <div class="header-stats" id="headerStats">
                    <div class="stat-item">
                        <span class="stat-value" id="totalRows">0</span>
                        <span class="stat-label">Total Rows</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="validRows">0</span>
                        <span class="stat-label">Valid</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="step-indicator">
                    <div class="step active" data-step="1">
                        <div class="step-number">1</div>
                        <div class="step-text">
                            <div class="step-title">Templates</div>
                            <div class="step-desc">Download or upload</div>
                        </div>
                    </div>
                    <div class="step" data-step="2">
                        <div class="step-number">2</div>
                        <div class="step-text">
                            <div class="step-title">Data</div>
                            <div class="step-desc">Map columns</div>
                        </div>
                    </div>
                    <div class="step" data-step="3">
                        <div class="step-number">3</div>
                        <div class="step-text">
                            <div class="step-title">Preview</div>
                            <div class="step-desc">Live preview</div>
                        </div>
                    </div>
                    <div class="step" data-step="4">
                        <div class="step-number">4</div>
                        <div class="step-text">
                            <div class="step-title">Generate</div>
                            <div class="step-desc">Bulk create</div>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Content Area -->
            <main class="content-area">
                <!-- Step 1: Templates & Upload -->
                <section class="step-content active" id="step1">
                    <div class="step-header">
                        <h2><i class="fas fa-download"></i> Get Started</h2>
                        <p>Download templates or upload your existing data file</p>
                    </div>

                    <div class="card-grid">
                        <div class="card">
                            <div class="card-icon"><i class="fas fa-file-csv"></i></div>
                            <h3>CSV Template</h3>
                            <p>Download a pre-formatted CSV template with examples</p>
                            <button id="downloadCsvTemplate" class="btn btn-outline">
                                <i class="fas fa-download"></i> Download CSV
                            </button>
                        </div>

                        <div class="card">
                            <div class="card-icon"><i class="fas fa-file-excel"></i></div>
                            <h3>Excel Template</h3>
                            <p>Get an Excel file with instructions and examples</p>
                            <button id="downloadExcelTemplate" class="btn btn-outline">
                                <i class="fas fa-download"></i> Download Excel
                            </button>
                        </div>

                        <div class="card upload-card">
                            <div class="file-upload-area" id="fileUploadArea">
                                <input type="file" id="fileInput" accept=".csv,.xlsx,.xls,.tsv" style="display: none;">
                                <div class="upload-content">
                                    <div class="upload-icon">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                    </div>
                                    <h3>Upload Your File</h3>
                                    <p>Drag & drop or <span class="browse-link" id="browseLink">browse files</span></p>
                                    <div class="supported-formats">
                                        <span class="format-tag">CSV</span>
                                        <span class="format-tag">XLSX</span>
                                        <span class="format-tag">XLS</span>
                                        <span class="format-tag">TSV</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Step 2: Column Mapping -->
                <section class="step-content" id="step2">
                    <div class="step-header">
                        <h2><i class="fas fa-table"></i> Map Your Data</h2>
                        <p>Select which columns contain your links and filenames</p>
                    </div>

                    <div class="mapping-container">
                        <div class="mapping-controls">
                            <div class="control-group">
                                <label for="linkColumn">
                                    <i class="fas fa-link"></i> Link Column
                                </label>
                                <select id="linkColumn" class="modern-select">
                                    <option value="">Choose column...</option>
                                </select>
                            </div>
                            <div class="control-group">
                                <label for="filenameColumn">
                                    <i class="fas fa-file-signature"></i> Filename Column
                                </label>
                                <select id="filenameColumn" class="modern-select">
                                    <option value="">Choose column...</option>
                                </select>
                            </div>
                        </div>

                        <div class="data-preview">
                            <div class="preview-header">
                                <h3>Data Preview</h3>
                                <div class="preview-info">
                                    <span id="previewInfo">First 5 rows</span>
                                </div>
                            </div>
                            <div class="table-container">
                                <table id="previewTable" class="modern-table"></table>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Step 3: Live Preview -->
                <section class="step-content" id="step3">
                    <div class="step-header">
                        <h2><i class="fas fa-eye"></i> Live Preview</h2>
                        <p>Customize and preview your QR code before bulk generation</p>
                    </div>

                    <div class="preview-container">
                        <div class="customization-panel">
                            <div class="tab-navigation">
                                <button class="tab-btn active" data-tab="basic">
                                    <i class="fas fa-cog"></i> Basic
                                </button>
                                <button class="tab-btn" data-tab="style">
                                    <i class="fas fa-palette"></i> Style
                                </button>
                                <button class="tab-btn" data-tab="logo">
                                    <i class="fas fa-image"></i> Logo
                                </button>
                                <button class="tab-btn" data-tab="text">
                                    <i class="fas fa-font"></i> Text
                                </button>
                            </div>

                            <div class="tab-content-container">
                                <!-- Basic Tab -->
                                <div class="tab-panel active" id="basic-panel">
                                    <div class="control-group">
                                        <label for="qrSize">QR Code Size</label>
                                        <select id="qrSize" class="modern-select">
                                            <option value="200">200x200 px (Small)</option>
                                            <option value="300" selected>300x300 px (Medium)</option>
                                            <option value="400">400x400 px (Large)</option>
                                            <option value="500">500x500 px (XL)</option>
                                            <option value="600">600x600 px (Print)</option>
                                        </select>
                                    </div>
                                    <div class="control-group">
                                        <label for="qrMargin">Margin</label>
                                        <select id="qrMargin" class="modern-select">
                                            <option value="1">Tight</option>
                                            <option value="2" selected>Normal</option>
                                            <option value="3">Loose</option>
                                            <option value="4">Extra Loose</option>
                                        </select>
                                    </div>
                                    <div class="control-group">
                                        <label for="errorLevel">Error Correction</label>
                                        <select id="errorLevel" class="modern-select">
                                            <option value="L">Low (7%)</option>
                                            <option value="M" selected>Medium (15%)</option>
                                            <option value="Q">High (25%)</option>
                                            <option value="H">Maximum (30%)</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Style Tab -->
                                <div class="tab-panel" id="style-panel">
                                    <div class="control-group">
                                        <label for="qrColorDark">QR Code Color</label>
                                        <div class="color-input-group">
                                            <input type="color" id="qrColorDark" value="#000000">
                                            <span class="color-value">#000000</span>
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label for="qrColorLight">Background Color</label>
                                        <div class="color-input-group">
                                            <input type="color" id="qrColorLight" value="#FFFFFF">
                                            <span class="color-value">#FFFFFF</span>
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label for="qrStyle">QR Code Style</label>
                                        <select id="qrStyle" class="modern-select">
                                            <option value="square" selected>Square (Standard)</option>
                                            <option value="rounded">Rounded Corners</option>
                                            <option value="dots">Dots Pattern</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Logo Tab -->
                                <div class="tab-panel" id="logo-panel">
                                    <div class="control-group">
                                        <label for="logoUpload">Upload Logo</label>
                                        <div class="file-input-group">
                                            <input type="file" id="logoUpload" accept="image/*">
                                            <label for="logoUpload" class="file-input-label">
                                                <i class="fas fa-upload"></i> Choose Image
                                            </label>
                                        </div>
                                        <small>Square images work best (PNG/JPG, max 2MB)</small>
                                    </div>
                                    <div class="control-group">
                                        <label for="logoSize">Logo Size: <span id="logoSizeValue">15%</span></label>
                                        <input type="range" id="logoSize" min="5" max="25" value="15" class="modern-range">
                                    </div>
                                    <div class="control-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="logoBackground">
                                            <span class="checkmark"></span>
                                            Add white background
                                        </label>
                                    </div>
                                    <div class="logo-preview" id="logoPreview" style="display: none;">
                                        <img id="logoPreviewImg" alt="Logo preview">
                                    </div>
                                </div>

                                <!-- Text Tab -->
                                <div class="tab-panel" id="text-panel">
                                    <div class="control-group">
                                        <label for="textBelow">Text Below QR Code</label>
                                        <input type="text" id="textBelow" class="modern-input" placeholder="Custom text (optional)">
                                        <small>Leave empty to use filename</small>
                                    </div>
                                    <div class="control-group">
                                        <label for="textSize">Font Size</label>
                                        <select id="textSize" class="modern-select">
                                            <option value="12">12px (Small)</option>
                                            <option value="14">14px (Normal)</option>
                                            <option value="16" selected>16px (Medium)</option>
                                            <option value="18">18px (Large)</option>
                                            <option value="20">20px (XL)</option>
                                        </select>
                                    </div>
                                    <div class="control-group">
                                        <label for="textColor">Text Color</label>
                                        <div class="color-input-group">
                                            <input type="color" id="textColor" value="#000000">
                                            <span class="color-value">#000000</span>
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <label for="textFont">Font Family</label>
                                        <select id="textFont" class="modern-select">
                                            <option value="Arial" selected>Arial</option>
                                            <option value="Helvetica">Helvetica</option>
                                            <option value="Inter">Inter</option>
                                            <option value="Georgia">Georgia</option>
                                            <option value="Times New Roman">Times New Roman</option>
                                            <option value="Courier New">Courier New</option>
                                        </select>
                                    </div>
                                    <div class="control-group">
                                        <label for="filenamePrefix">Filename Prefix</label>
                                        <input type="text" id="filenamePrefix" class="modern-input" value="qrcode_">
                                    </div>
                                    <div class="control-group">
                                        <label for="filenameSuffix">Filename Suffix</label>
                                        <input type="text" id="filenameSuffix" class="modern-input" placeholder="_generated">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="live-preview-panel">
                            <div class="preview-header">
                                <h3>Live Preview</h3>
                                <button id="refreshPreview" class="btn btn-sm btn-outline">
                                    <i class="fas fa-sync"></i> Refresh
                                </button>
                            </div>
                            <div class="preview-content">
                                <div class="qr-preview-container">
                                    <canvas id="previewCanvas" width="300" height="350"></canvas>
                                    <div class="preview-info-text">
                                        <p>Make changes to see live preview</p>
                                    </div>
                                </div>
                                <div class="preview-details">
                                    <div class="detail-item">
                                        <span class="label">Sample Link:</span>
                                        <span class="value" id="sampleLink">https://example.com</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="label">Text:</span>
                                        <span class="value" id="sampleText">Example Filename</span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="label">Final Size:</span>
                                        <span class="value" id="finalSize">300x350px</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Step 4: Generation -->
                <section class="step-content" id="step4">
                    <div class="step-header">
                        <h2><i class="fas fa-cogs"></i> Bulk Generation</h2>
                        <p>Configure generation settings and create all your QR codes</p>
                    </div>

                    <div class="generation-container">
                        <div class="generation-settings">
                            <div class="settings-card">
                                <h3>Performance Settings</h3>
                                <div class="control-group">
                                    <label for="batchSize">Batch Size</label>
                                    <select id="batchSize" class="modern-select">
                                        <option value="10">10 (Slow/Reliable)</option>
                                        <option value="25" selected>25 (Recommended)</option>
                                        <option value="50">50 (Fast)</option>
                                        <option value="100">100 (Very Fast)</option>
                                    </select>
                                    <small>Lower numbers are more reliable for large files</small>
                                </div>
                                <div class="control-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="skipErrors" checked>
                                        <span class="checkmark"></span>
                                        Skip invalid entries
                                    </label>
                                </div>
                            </div>

                            <div class="generation-summary">
                                <h3>Generation Summary</h3>
                                <div class="summary-stats">
                                    <div class="stat">
                                        <span class="stat-number" id="totalEntries">0</span>
                                        <span class="stat-label">Total Entries</span>
                                    </div>
                                    <div class="stat">
                                        <span class="stat-number" id="validEntries">0</span>
                                        <span class="stat-label">Valid</span>
                                    </div>
                                    <div class="stat">
                                        <span class="stat-number" id="estimatedTime">0s</span>
                                        <span class="stat-label">Est. Time</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="generation-controls">
                            <button id="generateBtn" class="btn btn-primary btn-lg">
                                <i class="fas fa-play"></i> Start Generation
                            </button>
                            <div class="progress-container" id="progressContainer" style="display: none;">
                                <div class="progress-header">
                                    <span id="progressText">0%</span>
                                    <span id="progressDetails">0 / 0</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="progressFill"></div>
                                </div>
                                <div class="progress-stats">
                                    <span>Success: <span id="successCount">0</span></span>
                                    <span>Failed: <span id="failedCount">0</span></span>
                                </div>
                            </div>
                            <div class="download-section" id="downloadSection" style="display: none;">
                                <div class="download-summary">
                                    <div class="download-icon">
                                        <i class="fas fa-check-circle"></i>
                                    </div>
                                    <h3>Generation Complete!</h3>
                                    <p id="downloadInfo">Generated QR codes successfully!</p>
                                </div>
                                <button id="downloadBtn" class="btn btn-success btn-lg">
                                    <i class="fas fa-download"></i> Download ZIP File
                                </button>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="debug.js"></script>
</body>
</html>